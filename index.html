<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<link data-trunk rel="copy-dir" href="static" data-target-path="." />
		<link data-trunk rel="css" href="style.css" />
		<script src="pdfium.js"></script>
		<link data-trunk rel="rust" />
	</head>

	<body>
		<main></main>
	</body>

	<script type="module">
		let trunkStarted = false;
		addEventListener("TrunkApplicationStarted", () => {
			trunkStarted = true;
		});
		PDFiumModule().then(async (pdfiumModule) => {
			const { initialize_pdfium_render, begin_rendering } = window.wasmBindings;
			console.assert(
				initialize_pdfium_render(
					pdfiumModule, // Emscripten-wrapped Pdfium WASM module
					event.detail.wasm,
					true, // Debugging flag; set this to true to get tracing information logged to the Javascript console
				),
				"Initialization of pdfium-render failed!",
			);
			console.log("pdfium-render initialized successfully!");
			begin_rendering();
		});
	</script>
</html>
